
随意的bb： 读aws的大量文档的时候常常会有溺水的错觉。感觉amplify就是一个我们要写的代码很短，但是有很长learning curve，而且对于新手鲁棒性挺低的东东吧（一开始一遇到bug就会卡3天，重装到第8次忽然就work了也不知道为啥 最近似乎最长连续探索6h总能把weird bug弄出来了）


接下来是今天的schedule：

## Backend:

1. install AWS CLI: https://docs.amplify.aws/cli/start/install#install-the-amplify-cli 
    e.g. 
    linux&mac: `sudo npm install -g @aws-amplify/cli`
    windows: `npm install -g @aws-amplify/cli --unsafe-perm=true`    
                //--unsafe-perm=true is not necessary 
                //教程 - https://www.centennialsoftwaresolutions.com/post/install-and-configure-the-aws-amplify-cli-on-windows-7

    common error for windows users here:
    amplify' is not recognized as an internal or external command, operable program or batch file.
        run `amplify -v` `node -v` `npm -v` and check they are up-to-date
        run `echo %path:;=&echo.%` and check C:\Users\pfefferz\AppData\Roaming\npm (or something like it) is listed in your path. 

  
2. pull the backend from cloud:       
    e.g. `amplify pull --appId d1n4bsjl3se5pf --envName dev`
         `amplify configure`

    common mistake here:
        `amplify init` is for creating a new Amplify APP. You do not need to run it in our case when you already have a project.
        `amplify configure` needs to be run after `amplify pull` or `amplify init`. Or you will get the error "You are not working inside a valid amplify project"
        可能会需要新建一个profile才能很好的work
        可能会需要 rm -rf amplify 才能pull成功

3. try make a small change on backend and push to cloud    
    e.g. `amplify push`   << It could take a long time

    rule here: If you feel uncertain, don't do it!!! << 着还挺重要的因为amplify push算是一个比较危险的操作 
    I used to follow my instinct and choose which seems reasonable, and it ruins everything that I have to build from scratch. 


## Frontend:
1. GraphQL x Amplify:
    Tutorial:
        1） Start with this tutorial first: https://docs.amplify.aws/start/getting-started/data-model/q/integration/js
            My updates in Comment-box/CommentApp.js is mainly from this
        2） Then this one（with code example for unconnected table）: https://docs.amplify.aws/lib/graphqlapi/advanced-workflows/q/platform/js#complex-objects
            My notes for this ⬆️ tutorial：  GraphQLDemo.js and GraphQLConfiguration.js
        3） Then you may refer to Code example for connected table: https://docs.amplify.aws/cli/graphql-transformer/overview

    Example code change for adding a lesson:
        https://github.com/WorkBuddy613/ManageCourses/pull/1/files  AddLessons.js AddIntroduction.js
    Connected table(GraphQL.schema): 
        https://github.com/WorkBuddy613/ManageCourses/blob/withBackend/amplify/backend/api/managecourses/schema.graphql
    //Please note that all code under src/graphql/* are automatically generated by AWS

    玩儿一下的话：
    具体查看的路径在： Backend - dev - API - View in AppSync - Run a query

    schema.graphql 在 amplify/backend/api/workbuddy/schema.graphql 
    改了这个之后 
        1. amplify push 并且选择Y 对于他问的是不是要automatically generate code
        2. amplify codegen 可以自动生成本地的代码
 

2. what should be see in DynamoDB table:
     具体查看的路径在： ManageCourses - Backend environments - API - CourseTable - View - Items

3. Amplify Auth:
    Tutorial:
        https://docs.amplify.aws/lib/auth/getting-started/q/platform/js

    Example code change for getting current user: 
        comment-box: https://github.com/WorkBuddy613/Comment-box/blob/main/src/CommentInput.js#L11
    Course: userID as an attribute
    




